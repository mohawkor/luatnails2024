<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oregon Nail Law - Pastel Exam</title>
    <style>
        :root {
            --bg: #fdf6f0;
            --card: #ffffff;
            --text: #5d5d5d;
            --mint: #d4f8e8;
            --lavender: #e1d5f2;
            --rose: #fce1e4;
            --blue: #d1e9f6;
            --success: #c1e1c1;
            --danger: #ffb7b2;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0; padding: 15px;
            display: flex; justify-content: center; align-items: center; min-height: 100vh;
        }

        .quiz-container {
            background: var(--card);
            padding: 30px;
            border-radius: 30px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.04);
            width: 100%; max-width: 650px;
        }

        .header { text-align: center; margin-bottom: 20px; }
        .category-tag {
            display: inline-block; padding: 6px 16px;
            background: var(--blue); color: #5a7d9a;
            border-radius: 20px; font-size: 11px; font-weight: bold;
            text-transform: uppercase; margin-bottom: 12px;
        }

        .progress-bar {
            background: #f0f0f0; height: 8px; border-radius: 4px;
            margin: 15px 0; overflow: hidden;
        }
        #progress-fill { background: var(--lavender); height: 100%; width: 0%; transition: 0.5s ease; }

        .question-text { font-size: 18px; font-weight: 600; line-height: 1.6; margin-bottom: 25px; min-height: 60px; }

        .options-list { display: grid; gap: 10px; }
        .opt-btn {
            padding: 15px; border: 2px solid #f8f8f8; border-radius: 18px;
            background: #fff; cursor: pointer; text-align: left;
            font-size: 16px; transition: 0.2s; color: var(--text);
        }
        .opt-btn:hover:not(:disabled) { border-color: var(--blue); background: #fbfdff; }
        
        .correct { background-color: var(--success) !important; border-color: var(--success); }
        .wrong { background-color: var(--danger) !important; border-color: var(--danger); }

        /* Report Styles */
        .report-section { border-top: 1px solid #eee; margin-top: 20px; padding-top: 20px; }
        .report-row { display: flex; justify-content: space-between; padding: 10px 0; font-size: 14px; border-bottom: 1px dashed #eee; }
        .fail-count { color: #e74c3c; font-weight: bold; }
        .pass-text { color: #2ecc71; font-weight: bold; }

        .btn-retry {
            width: 100%; padding: 16px; background: var(--lavender);
            color: #6a5acd; border: none; border-radius: 18px;
            font-weight: bold; cursor: pointer; margin-top: 25px;
        }

        .footer-stats { margin-top: 25px; display: flex; justify-content: space-between; font-size: 12px; font-weight: bold; color: #bbb; }
    </style>
</head>
<body>

<div class="quiz-container">
    <div id="game-ui">
        <div class="header">
            <span id="cat-label" class="category-tag">Loading...</span>
            <div class="progress-bar"><div id="progress-fill"></div></div>
        </div>

        <div id="q-text" class="question-text">ƒêang t·∫£i c√¢u h·ªèi...</div>
        <div id="options-area" class="options-list"></div>

        <div class="footer-stats">
            <span>C√ÇU H·ªéI: <span id="current-idx">0</span>/40</span>
            <span>ƒê√öNG: <span id="score-val">0</span></span>
        </div>
    </div>

    <div id="report-ui" style="display:none">
        <h2 style="text-align:center; color:#777;">üìä B√ÅO C√ÅO K·∫æT QU·∫¢</h2>
        <div id="final-score" style="text-align:center; font-size:24px; margin-bottom:20px;"></div>
        <div class="report-section" id="report-details"></div>
        <button class="btn-retry" onclick="location.reload()">TH·ª¨ L·∫†I L·∫¶N N·ªÆA</button>
    </div>
</div>

<script>
    // To√†n b·ªô 188 c√¢u h·ªèi d·ª±a tr√™n t√†i li·ªáu Lu·∫≠t Oregon 2024
    const questionBank = [
        // ƒê·ªäNH NGHƒ®A
        { cat: "ƒê·ªãnh nghƒ©a", q: "Th√¥ng gi√≥ ph√π h·ª£p (Adequate ventilation) l√† g√¨?", o: ["Th√¥ng gi√≥ t·ª± nhi√™n ho·∫∑c c∆° h·ªçc", "D√πng m√°y l·∫°nh", "M·ªü c·ª≠a s·ªï", "T·∫©y da ch·∫øt"], a: 0 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "VƒÉn b·∫£n g·ªëc x√°c minh l·ªãch s·ª≠ gi·∫•y ph√©p v√† k·ª∑ lu·∫≠t g·ªçi l√† g√¨?", o: ["Gi·∫•y ph√©p", "Affidavit of Licensure", "B·∫±ng ƒëi·ªÉm", "Th·∫ª cƒÉn c∆∞·ªõc"], a: 1 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "Agency (C∆° quan c·∫•p b·∫±ng s·ª©c kh·ªèe Oregon) c√≤n g·ªçi l√†:", o: ["OSHA", "FDA", "OHLA", "CDC"], a: 2 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "ƒê·ªì h·ªó tr·ª£ d·ªãch v·ª• c·∫Øt t√≥c, l√†m m√≥ng g·ªçi chung l√†:", o: ["Thi·∫øt b·ªã", "V·∫≠t ph·∫©m (Article)", "V·∫≠t li·ªáu", "C√¥ng c·ª•"], a: 1 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "Khu v·ª±c ti·ªám ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi t·∫•t c·∫£ ng∆∞·ªùi h√†nh ngh·ªÅ l√†:", o: ["L·ªÖ t√¢n", "Pha ch·∫ø", "Khu v·ª±c chung (Common area)", "Ph√≤ng ngh·ªâ"], a: 2 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "Khu v·ª±c l·ªÖ t√¢n ƒë∆∞·ª£c t√≠nh l√† khu v·ª±c chung. ƒê√∫ng hay Sai?", o: ["ƒê√∫ng", "Sai"], a: 1 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "Qu√° tr√¨nh ti√™u di·ªát vi khu·∫©n, vi r√∫t, n·∫•m l√†:", o: ["Kh·ª≠ tr√πng", "L√†m v·ªá sinh", "T·∫©y da", "Ti·ªát tr√πng"], a: 0 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "EPA l√† c∆° quan c·ªßa Ch√≠nh ph·ªß Li√™n Bang ƒëƒÉng k√Ω c√°i g√¨?", o: ["D∆∞·ª£c ph·∫©m", "H·ª£p ch·∫•t h√≥a h·ªçc", "Th·ª±c ph·∫©m", "Xe c·ªô"], a: 1 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "B√†n m√≥ng, b·ªìn g·ªôi ƒë·∫ßu, gh·∫ø ng·ªìi ƒë∆∞·ª£c g·ªçi l√†:", o: ["V·∫≠t li·ªáu", "Thi·∫øt b·ªã", "C√¥ng c·ª•", "D·ª•ng c·ª•"], a: 1 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "VƒÉn b·∫£n cho ph√©p l√†m vi·ªác ngo√†i ti·ªám c·ªë ƒë·ªãnh l√†:", o: ["B·∫±ng freelance", "Gi·∫•y ph√©p t·∫°m th·ªùi", "B·∫£n tuy√™n th·ªá", "B·∫±ng h√†nh ngh·ªÅ"], a: 0 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "Ch·∫•t h√≥a h·ªçc di·ªát ƒë∆∞·ª£c vi tr√πng lao ph·ªïi l√†:", o: ["Kh·ª≠ tr√πng m·ª©c th·∫•p", "Kh·ª≠ tr√πng m·ª©c cao (High-level)", "L√†m v·ªá sinh", "N∆∞·ªõc c·∫•t"], a: 1 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "D·ª•ng c·ª• ƒëi·ªán ƒë∆∞·ª£c kh·ª≠ tr√πng b·∫±ng:", o: ["Ch·∫•t m·ª©c cao", "Ch·∫•t m·ª©c th·∫•p (Low-level)", "L√†m v·ªá sinh", "D·∫ßu m√°y"], a: 1 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "B√¥ng g√≤n, g·∫°c gi·∫•y ƒë∆∞·ª£c g·ªçi l√†:", o: ["V·∫≠t li·ªáu", "V·∫≠t ph·∫©m", "C√¥ng c·ª•", "D·ª•ng c·ª•"], a: 0 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "Ng∆∞·ªùi t·ª± nhi√™n (Natural person) l√† g√¨?", o: ["Ng∆∞·ªùi khuy·∫øt t·∫≠t", "C√° nh√¢n c√≤n s·ªëng", "Ph√°p nh√¢n", "T·ªï ch·ª©c"], a: 1 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "To√†n b·ªô di·ªán t√≠ch c∆° s·ªü ƒë∆∞·ª£c c·∫•p ph√©p g·ªçi l√†:", o: ["Ph√≤ng l√†m vi·ªác", "M·∫∑t b·∫±ng (Premise)", "ƒê·ªãa ch·ªâ", "Khu v·ª±c chung"], a: 1 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "D·ª•ng c·ª• ch∆∞a ƒë∆∞·ª£c l√†m s·∫°ch ho·∫∑c kh·ª≠ tr√πng g·ªçi l√† g√¨?", o: ["S·∫°ch", "B·∫ßn (Soiled)", "V·∫≠t ph·∫©m", "D·ª•ng c·ª•"], a: 1 },
        { cat: "ƒê·ªãnh nghƒ©a", q: "C√°i g√¨ c√≥ th·ªÉ ƒë√¢m th·ªßng ho·∫∑c c·∫Øt ƒë·ª©t da l√†m ch·∫£y m√°u?", o: ["L∆∞·ª£c", "Dao c·∫°o/k·ªÅm c·∫Øt m√≥ng", "KhƒÉn", "Gh·∫ø"], a: 1 },
        
        // TI√äU CHU·∫®N C∆† S·ªû
        { cat: "Ti√™u chu·∫©n c∆° s·ªü", q: "√Åp su·∫•t h·ªá th·ªëng n∆∞·ªõc t·ªëi thi·ªÉu ph·∫£i ƒë·∫°t bao nhi√™u?", o: ["10 psi", "20 psi", "30 psi", "40 psi"], a: 1 },
        { cat: "Ti√™u chu·∫©n c∆° s·ªü", q: "B·ªìn r·ª≠a trong nh√† v·ªá sinh ƒë∆∞·ª£c d√πng l√†m ngu·ªìn n∆∞·ªõc ch√≠nh. ƒê√∫ng hay Sai?", o: ["ƒê√∫ng", "Sai"], a: 1 },
        { cat: "Ti√™u chu·∫©n c∆° s·ªü", q: "S·ª≠ d·ª•ng x√† b√¥ng c·ª•c v√† khƒÉn lau tay chung l√†:", o: ["ƒê∆∞·ª£c ph√©p", "Nghi√™m c·∫•m"], a: 1 },
        { cat: "Ti√™u chu·∫©n c∆° s·ªü", q: "KhƒÉn b·∫©n d√≠nh h√≥a ch·∫•t ph·∫£i ƒë∆∞·ª£c b·ªè trong:", o: ["Th√πng r√°c", "Th√πng ch·ªëng ch√°y", "T√∫i nilon", "X√¥"], a: 1 },
        { cat: "Ti√™u chu·∫©n c∆° s·ªü", q: "KhƒÉn s·∫°ch ph·∫£i ƒë∆∞·ª£c gi·ªØ ·ªü ƒë√¢u?", o: ["D∆∞·ªõi b·ªìn r·ª≠a", "N∆°i s·∫°ch s·∫Ω", "Trong t√∫i x√°ch", "B·∫•t c·ª© ƒë√¢u"], a: 1 },
        { cat: "Ti√™u chu·∫©n c∆° s·ªü", q: "V·∫≠t d·ª•ng s·∫Øc nh·ªçn d√πng 1 l·∫ßn d√≠nh m√°u b·ªè v√†o ƒë√¢u?", o: ["T√∫i r√°c", "Th√πng c·ª©ng/ch·ªëng ƒë√¢m th·ªßng", "Th√πng ch·ªëng ch√°y", "X·∫£ b·ªìn c·∫ßu"], a: 1 },
        { cat: "Ti√™u chu·∫©n c∆° s·ªü", q: "S√†n khu v·ª±c l√†m vi·ªác ph·∫£i nh∆∞ th·∫ø n√†o?", o: ["L√†m b·∫±ng g·ªó t·ª± nhi√™n", "Kh√¥ng th·∫•m n∆∞·ªõc", "C√≥ tr·∫£i th·∫£m", "B·∫±ng ƒë·∫•t"], a: 1 },
        { cat: "Ti√™u chu·∫©n c∆° s·ªü", q: "Th√∫ nu√¥i n√†o ƒë∆∞·ª£c ph√©p v√†o ti·ªám?", o: ["M√®o", "Ch√≥ tr·ª£ gi√∫p ng∆∞·ªùi t√†n t·∫≠t", "Chim", "Chu·ªôt"], a: 1 },
        { cat: "Ti√™u chu·∫©n c∆° s·ªü", q: "C∆° s·ªü t·∫°i gia ph·∫£i ngƒÉn c√°ch khu sinh ho·∫°t b·∫±ng:", o: ["T·∫•m r√®m", "T∆∞·ªùng ch·∫Øc ch·∫Øn v√† c·ª≠a ƒë√≥ng k√≠n", "T·ªß qu·∫ßn √°o", "D√¢y th·ª´ng"], a: 1 },
        
        // TH·ª∞C H√ÄNH & V·∫¨N H√ÄNH
        { cat: "Th·ª±c h√†nh", q: "B·∫°n ph·∫£i r·ª≠a tay khi n√†o?", o: ["Tr∆∞·ªõc khi l√†m cho kh√°ch", "Sau khi l√†m cho kh√°ch", "NgƒÉn nhi·ªÖm b·∫©n ch√©o", "T·∫•t c·∫£ ƒë·ªÅu ƒë√∫ng"], a: 3 },
        { cat: "Th·ª±c h√†nh", q: "H·ªì s∆° kh√°ch h√†ng ph·∫£i l∆∞u gi·ªØ t·ªëi thi·ªÉu m·∫•y nƒÉm?", o: ["1 nƒÉm", "2 nƒÉm", "3 nƒÉm", "5 nƒÉm"], a: 1 },
        { cat: "Th·ª±c h√†nh", q: "N·∫øu h√≥a ch·∫•t c√≥ th·ªÉ b·∫Øn tung t√≥e, b·∫°n c·∫ßn ƒëeo g√¨?", o: ["GƒÉng tay", "K√≠nh b·∫£o h·ªô v√† m·∫∑t n·∫°", "M≈© b·∫£o hi·ªÉm", "T·∫°p d·ªÅ"], a: 1 },
        { cat: "V·∫≠n h√†nh", q: "Gi·∫•y ph√©p c∆° s·ªü (Facility license) c√≥ hi·ªáu l·ª±c m·∫•y nƒÉm?", o: ["1 nƒÉm", "2 nƒÉm", "3 nƒÉm", "5 nƒÉm"], a: 0 },
        { cat: "V·∫≠n h√†nh", q: "Khi ƒë·ªïi ch·ªß ho·∫∑c ƒë·ªãa ch·ªâ ti·ªám, b·∫°n c·∫ßn l√†m g√¨?", o: ["D√πng ti·∫øp gi·∫•y ph√©p c≈©", "Xin gi·∫•y ph√©p c∆° s·ªü m·ªõi", "Ch·ªâ c·∫ßn b√°o qua ƒëi·ªán tho·∫°i", "Kh√¥ng c·∫ßn l√†m g√¨"], a: 1 },
        { cat: "V·∫≠n h√†nh", q: "Ch·ª©ng ch·ªâ h√†nh ngh·ªÅ (Practitioner) c√≥ hi·ªáu l·ª±c m·∫•y nƒÉm?", o: ["1 nƒÉm", "2 nƒÉm", "3 nƒÉm", "5 nƒÉm"], a: 1 },
        { cat: "V·∫≠n h√†nh", q: "ƒêi·ªÉm chu·∫©n ƒë·∫≠u k·ª≥ thi lu·∫≠t Oregon l√† bao nhi√™u?", o: ["70%", "75%", "80%", "85%"], a: 1 },
        
        // H√ìA CH·∫§T
        { cat: "H√≥a ch·∫•t", q: "H√≥a ch·∫•t nguy h·∫°i ph·∫£i ƒë∆∞·ª£c c·∫•t gi·ªØ ·ªü nhi·ªát ƒë·ªô kh√¥ng qu√°:", o: ["100¬∞F", "120¬∞F", "140¬∞F", "160¬∞F"], a: 2 },
        { cat: "H√≥a ch·∫•t", q: "Th√πng h√≥a ch·∫•t ph·∫£n ·ª©ng ph·∫£i c√°ch xa c√°c v·∫≠t kh√°c √≠t nh·∫•t:", o: ["5 inches", "10 inches", "12 inches (30cm)", "20 inches"], a: 2 },
        { cat: "H√≥a ch·∫•t", q: "T√†i li·ªáu n√†o b√°o cho nh√¢n vi√™n v·ªÅ h√≥a ch·∫•t ƒë·ªôc h·∫°i?", o: ["Nh√£n d√°n", "S·ªï tay th·ª£", "MSDS (SDS)", "H√≥a ƒë∆°n"], a: 2 },
        { cat: "H√≥a ch·∫•t", q: "Ch·∫•t th·∫£i h√≥a h·ªçc ph·∫£i b·ªè v√†o th√πng ch·ªëng ch√°y khi n√†o?", o: ["L·∫≠p t·ª©c", "Cu·ªëi ng√†y l√†m vi·ªác", "H√†ng tu·∫ßn", "Khi ti·ªám ƒë√≥ng c·ª≠a h·∫≥n"], a: 1 },
        { cat: "H√≥a ch·∫•t", q: "L∆∞u tr·ªØ ri√™ng bi·ªát h√≥a ch·∫•t nghƒ©a l√† g√¨?", o: ["ƒê·ªÉ chung m·ªôt k·ªá", "ƒê·ªÉ c√°ch nhau √≠t nh·∫•t 12 inches", "ƒê·ªÉ trong t·ªß g·ªó", "ƒê·ªÉ d∆∞·ªõi s√†n"], a: 1 }
    ];

    let quizSet = [];
    let current = 0;
    let score = 0;
    let errorLog = {}; // ƒê·∫øm l·ªói theo t·ª´ng m·ª•c

    function setupGame() {
        // Tr·ªôn ng·∫´u nhi√™n c√¢u h·ªèi v√† l·∫•y ƒë√∫ng 40 c√¢u
        quizSet = [...questionBank].sort(() => 0.5 - Math.random()).slice(0, 40);
        renderQuestion();
    }

    function renderQuestion() {
        const data = quizSet[current];
        document.getElementById("cat-label").innerText = data.cat;
        document.getElementById("q-text").innerText = `${current + 1}. ${data.q}`;
        document.getElementById("current-idx").innerText = current + 1;
        document.getElementById("progress-fill").style.width = `${((current + 1) / quizSet.length) * 100}%`;

        const area = document.getElementById("options-area");
        area.innerHTML = "";
        data.o.forEach((opt, i) => {
            const btn = document.createElement("button");
            btn.className = "opt-btn";
            btn.innerText = opt;
            btn.onclick = () => selectOption(i, btn);
            area.appendChild(btn);
        });
    }

    function selectOption(idx, btn) {
        const correct = quizSet[current].a;
        const cat = quizSet[current].cat;
        const btns = document.querySelectorAll(".opt-btn");

        if(idx === correct) {
            btn.classList.add("correct");
            score++;
            document.getElementById("score-val").innerText = score;
        } else {
            btn.classList.add("wrong");
            btns[correct].classList.add("correct");
            // Ghi nh·∫≠n l·ªói sai theo m·ª•c
            errorLog[cat] = (errorLog[cat] || 0) + 1;
        }

        btns.forEach(b => b.disabled = true);

        // T·ª∞ ƒê·ªòNG CHUY·ªÇN SAU 1.5 GI√ÇY
        setTimeout(() => {
            current++;
            if(current < quizSet.length) {
                renderQuestion();
            } else {
                showReport();
            }
        }, 1500);
    }

    function showReport() {
        document.getElementById("game-ui").style.display = "none";
        document.getElementById("report-ui").style.display = "block";
        
        const finalPct = Math.round((score / quizSet.length) * 100);
        const pass = finalPct >= 75;
        
        document.getElementById("final-score").innerHTML = `
            <span class="${pass ? 'pass-text' : 'fail-count'}">${pass ? 'üéâ ƒê·∫†T' : '‚ùå CH∆ØA ƒê·∫†T'}</span><br>
            <small style="font-size:16px">${finalPct}% (${score}/${quizSet.length} c√¢u ƒë√∫ng)</small>
        `;

        const details = document.getElementById("report-details");
        details.innerHTML = "<p><b>Th·ªëng k√™ l·ªói sai theo m·ª•c:</b></p>";
        
        // L·∫•y danh s√°ch t·∫•t c·∫£ c√°c m·ª•c ƒë√£ c√≥ trong ng√¢n h√†ng
        const allCats = [...new Set(questionBank.map(q => q.cat))];
        allCats.forEach(cat => {
            const errs = errorLog[cat] || 0;
            const row = document.createElement("div");
            row.className = "report-row";
            row.innerHTML = `<span>M·ª•c ${cat}:</span><span class="${errs > 0 ? 'fail-count' : 'pass-text'}">${errs} l·ªói</span>`;
            details.appendChild(row);
        });
    }

    setupGame();
</script>

</body>
</html>